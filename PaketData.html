<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Kembali</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap" rel="stylesheet">
<style type="text/css" media="all">
  *{
    font-family: 'Poppins', sans-serif;
    margin: 0px;
    padding: 0px;
  }
  
  body{
 background-color: #EDF1FC;
  }
  .bg-inti{
    background-color: #04befe;
  }
  .text-inti{
    color: #04befe;
  }
.bg-mix{
  background-color: rgb(232,231,231);
}
.warna-font {
  color : red;
}
#offcanvasBottom{
  width: 100%;
  top: 30%;
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
  height: 100%;
}
</style>
  </head>
  <body>
    <!-- NAVIGASI ATAS -->
 <div  class="container header height : 500px; bg-inti text-white p-2 pt-2">
   <h4 style="text-align:center;">Paket Data</h4>
 </div>
    <!-- END NAVIGASI ATAS -->

 <div class="container pt-4 bg-white">
     <div class="container mt-2">
       <a href="https://bayarimopay.webtoko.net/ambil_kontak">
         <span class="material-icons text-inti" style="margin-top: 10px; margin-left: 270px; position: absolute; font-size: 30px">
           perm_contact_calendar
         </span>
       </a>
       <input style="width:100%; height: 50px; border-radius:8px; border:1px solid rgb(225,225,225); font-size:18px; outline:none;" class="p-2 {{hasil_kontak}}" type="tel" name="" id="nomor-val" value="" placeholder="Nomor ponsel.." oninput="ceknomoruser()" />
  
       <br /><br />
</div>
 
  <div class="container mt-3">
  <div class="row">
    <div class="col-2">
      <img id="img_operator" style="width:130%;  border-radius:50px;" src="https://i.postimg.cc/SxbhjdLs/20221127-012751.png" alt="" />
    </div>
    <div class="col-7">
      <h5 style="font-weight:bold; margin-top: 10px;" id="operator_produk">Operator</h5>
    </div>
    <div class="col-3">
      <button data-bs-toggle="offcanvas" data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom" style="font-size:14px; margin-top: 7px; border:1px solid #fff; border:none; color:white; padding:3px; border-radius:10px" class="bg-inti w-100 p-2" type="button">Pilih</button>
    </div>
  </div>
    
  </div>
  
 <br /><br /><br />
  
  
</div>





<div style="background-color:#EDF1FC; border-top-left-radius:30px; border-top-right-radius:30px; margin-top:-3rem;" class="container">
  
  
  <div class="container">
  <div class="row pt-3">
    <div class="col-4">
      <h5 style="font-weight:bold;">Kategori</h5>
    </div>
    <div style="text-align:right;" class="col-8">
    <div style="margin-left:-60%; " class="dropdown">
  <a style="outline:none; text-decoration:none; color:black;" class=" dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
   Lainnya
  </a>
  <ul style="width:100%" class="dropdown-menu" id="lopkategori_produk">
    
    <!-- LIST GROUP KATAGORI -->
    
    <!-- END LIST GROUP KATAGORI -->
 
  </ul>
</div>
    
    </div>
  </div>
  
  </div>
  
  
  <!-- LOOPING PRODUK -->
  <ul class="list-group" id="looping_produk">
  
</ul>

    <div class="container" id="produk_kosong">
        <div style="background-color:white; border-radius:5px;" class="container p-4 shadow text-center">
          <img style="width:100%" class="mb-3" src="https://i.postimg.cc/8zVKnv2B/20221019-222410.jpg" alt="" />
          <h6 style="font-weight:bold;">PRODUK BELUM TERSEDIA</h6>
          <p style="font-size:10px; color:red;"><i>Silahkan hubungi admin untuk menanyakan terkait produk ini.</i></p>
          <a href="https://bayarimopay.webtoko.net/akun/?page=chat">
            <button type="button" class="btn bg-inti">hubungi admin</button>
          </a>
        </div>
      </div>
  
  
      <div id="loading-esaku" class="loading-esaku mt-5">
        <div class="container text-center mt-5">
          <img style="width:40%;" src="https://i.postimg.cc/XJzG7Wp0/google-loading-icon-qgdhn1xi84-unscreen.gif"/> <p class="warna-font" id="red"></p>
  
        </div>
      </div>
  
   <div class="container" id="data_kosong">
               <div style="background-color: transparan; border-radius:5px;" class="container p-4  text-center">
                 <img style="width:100%" class="mb-3" src="https://i.postimg.cc/nc0MNhpY/image-processing20211026-15840-unscreen.gif" alt="" />
                 <h6 style="font-weight:bold;"> </h6>
                 <p style="font-size:15px; color:black;"><i>Masukan nomor ponsel terlebih dahulu..</i></p>
  
        </div>
      </div>
<!-- END LOOPUNG PRODUK -->
</div>







<div  class="offcanvas offcanvas-bottom" tabindex="-1" id="offcanvasBottom" aria-labelledby="offcanvasBottomLabel">
  <div style="color:white; border-top-right-radius:10px; border-top-left-radius:10px; text-align:center;" class="offcanvas-header bg-inti text-center">
    <h5>pilih operator</h5>
  </div>
  <div class="offcanvas-body small">
    
    
    <!-- LOOPING FATA GROUP KATEGORI -->
    <div id="looping_kategori">
 
    </div>
   
  </div>
</div>




<!-- Modal -->
<div style="margin-top:5rem;" class="modal fade mt-5" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-inti text-white text-center">
        <h5 class="modal-title" id="exampleModalLabel">Konfirmasi Pembelian</h5>
      </div>
      <div class="modal-body">
        
        
        
        
        <div class="container">
 
           <div style="border-bottom:1px solid rgb(219,219,219)" class="row mt-3 mb-3">
             <div class="col-6 text-left">
               <h6>Nomor Tujuan</h6>
             </div>
             <div style="text-align:right;" class="col-6 text-right">
             <h6 id="nama_produk"></h6>
             </div>
           </div>         
          
          
       
          

          <div style="border-bottom:1px solid rgb(219,219,219); padding-bottom:20px;" class="deskripsi ">
            <h6>Deskripsi:</h6>
            <small id="detail-nama-deskripsi"></small>
          </div>
          
          
          <div style="padding-bottom:10px; font-weight:bold;" class="row mt-3">
          <div class="col-6 text-left">
            <h6>Total bayar</h6>
          </div>
          <div style="text-align:right;" class="col-6 text-right">
            <h6 id="detail-nama-total"></h6>
          </div>
          </div>
          
          
        </div>
        
        
        
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-warning" data-bs-dismiss="modal">Batal</button>
        <button data-bs-toggle="modal" data-bs-target="#exampleModal2" type="button" id="btn_null" class="btn bg-inti">Bayar</button>
        <a id="linknya-hallo" href="">
        <button id="btn_real" type="button" class="btn bg-inti">Bayar</button>
        </a>
      </div>
    </div>
  </div>
</div>





<div style="margin-top:5rem;" class="modal fade mt-5" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body pt-5 pb-3">
        
        
        
        
        <div class="container text-center">
        
                  <img style="border-radius:10px; width:30%; height:30%" src="https://i.postimg.cc/6qRLRx2P/Perhatian.gif" class="mb-5" alt="" />
                  <h2 style="font-weight:bold;" class="mt-2 mb-2">Maaf..!</h2>
                  <div class="container">
                    <p>Periksa kembali nomor tujuan Anda !</p>
                  </div>
                  <div class="container">
        
                    <button data-bs-dismiss="modal" style="width:30%" class="btn p-2 bg-inti" type="button">OK</button>
                  </div>
                </div>
        
        
        
        
      </div>
    </div>
  </div>
</div>




<br /><br /><br />
<script src="https://code.jquery.com/jquery-3.6.0.min.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" charset="utf-8">
$("#loading-esaku").hide();
$("#produk_kosong").hide();
$("#data_kosong").show();
$("#btn_null").hide();
  let json =[
      {
      "Indosat" :
        {
        "nama" : "Indosat",
        "url" : "paket-data-indosat-261217",
        "gambar" : "https://i.postimg.cc/bw8jNrDc/images-2022-10-07-T132401-607.jpg",
        "kode" : "Indosat",
        "kategori" :[
          {
            "nama" : "Data Umum",
            "url" : "data-umum-indosat-261216",
          },
          {
            "nama" : "Data Yellow",
            "url" : "data-yellow-261752",
          },
          {
            "nama" : "Data Freedom Combo",
            "url" : "freedom-combo-261804",
          },
           {
             "nama": "Data Freedom Harian",
             "url": "freedom-harian-261975",
           },
           {
             "nama": "Data Freedom Internet",
             "url": "freedom-internet-262414",
           }, 
            {
              "nama": "Data Mini",
              "url": "data-mini-indosat-262032",
            },         
          ],
        },
    
      
      "Telkomsel" : {
        "nama" : "Telkomsel",
        "url" : "paket-data-telkomsel-258109",
        "gambar" : "https://i.postimg.cc/rFZpDSTX/images-2022-10-07-T132212-320.jpg",
        "kode" : "Telkomsel",
        "kategori" :[
          {
            "nama" : "Data Bulk",
            "url" : "data-bulk-telkomsel-258742",
          },
          {
            "nama" : "Data Flash",
            "url" : "data-flash-telkomsel-258947",
          },
          {
            "nama" : "Data Youtube",
            "url" : "youtube-telkomsel-259719",
          },
          
          {
            "nama": "Data Mini",
            "url": "data-mini-telkomsel-259936",
          },
          {
            "nama": "Data Combo Sakti",
            "url": "combosakti-telkomsel-260270",
          },
           ],
      },
      
      
      "Tri" : {
        "nama" : "Tri indonesia",
        "url" : "paket-data-tri-280591",
        "gambar" : "https://i.postimg.cc/VkLmW5Y9/images-2022-10-07-T134356-702.jpg",
        "kode" : "Tri",
        "kategori" :[
          {
            "nama" : "Data Umum",
            "url" : "tri-umum-280592",
          },
          {
            "nama" : "Data Mix",
            "url" : "data-mix-329998",
          },
          {
            "nama" : "Data Mini",
            "url" : "data-mini-329995",
          },
          {
            "nama": "Data Home",
            "url": "data-home-329999",
          },
          {
            "nama": "Data Happy",
            "url": "data-happy-330001",
          },
          {
            "nama": "Data Getmore",
            "url": "data-getmore-329997",
          },
          {
            "nama": "Data Alwayson",
            "url": "data-alwayson-329996",
          },
          
          ],
      },
      
      
      "Xl Axiata" : {
        "nama" : "Xl Axiata",
        "url" : "paket-data-xl-269285",
        "gambar" : "https://i.postimg.cc/rm2HgY16/download-3.jpg",
        "kode" : "Xl Axiata",
        "kategori" :[
          {
            "nama" : "Data Hotrod",
            "url" : "data-hotrod-330003",
          },
          {
            "nama" : "Data Umum",
            "url" : "paket-data-umum-269286",
          },
          {
            "nama" : "Data Mini",
            "url" : "xl-data-mini-273434",
          },
          {
            "nama": "Data Xtra-Combo",
            "url": "xl-xtra-combo-273455",
          },   
          ],
      },
      
      
      
      "Axis" : {
        "nama" : "Axis",
        "url" : "paket-data-axis-264690",
        "gambar" : "https://i.postimg.cc/qRfqknKc/images-2022-10-07-T132537-156.jpg",
        "kode" : "Axis",
        "kategori" :[
          {
            "nama" : "Data Bronet",
            "url" : "bronet-268029",
          },
          {
            "nama" : "Data Umum",
            "url" : "data-axis-umum-329986",
          },
          {
            "nama" : "Data Kzl",
            "url" : "data-kzl-axis-266528",
          },
          {
            "nama": "Data Mini ",
            "url": "data-mini-axis-264693",
          },
          {
            "nama": "Data Owsem",
            "url": "owsem-268688",
          },
          ],
      },
      
      
      
      
      "Smartfren" : {
        "nama" : "Smartfren",
        "url" : "paket-data-smartfren-277635",
        "gambar" : "https://i.postimg.cc/nL9KR4Zq/IMG-20221007-135231.jpg",
        "kode" : "Smartfren",
        "kategori" :[
          {
            "nama" : "Data Umum",
            "url" : "data-umum-277636",
          },
          {
            "nama" : "Data 1ON+",
            "url" : "data-1on-329993",
          },
          {
            "nama" : "Data Nonstop",
            "url" : "data-nonstop-329991",
          },
         {
           "nama": "Data Volume",
           "url": "data-volume-329990",
         },
          {
            "nama": "Data Unlimited",
            "url": "smartfren-unlimited-329989",
          },
          {
            "nama": "Data Unlimited Nonstop",
            "url": "unlimited-nonstop-329994",
          },        
          ],
      },
      
      
      
      
      
    }
    ];
  
  
  
  function jsonProdukKategori(e){
    
    let n = json[0][e].kategori;
    
    return n;
  }
  
  function urlJson(val){
    let a= json[0][val].url;
    return a;
  }
  
  function jsonNama(val){
    let a= json[0][val].nama;
    return a;
  }
  
  
    // LOOPING KATEGORI PRODUK
  function loopingKategoriProduk(lopp){

  $.each(lopp, function(i, data){
     $('#lopkategori_produk').append(`<li style="width:100%" class="item_list_kategori dropdown-item item_list_kategori pt-2" onclick="produkKategori('`+data.url+`', '`+data.nama+`')">
      <div class="row">
        <div class="col-2">
          <span class="material-icons text-inti">
        contacts
        </span>
        </div>
        <div style="border-bottom:1px solid rgb(229,229,229)" class="col-10 pb-2">
          <div class="row">
            <div class="col-10">`+data.nama+`
            </div>
            <div class="col-2">
              <span class="material-icons text-inti">
              chevron_right
              </span>
            </div>
          </div>
        </div>
      </div>
      </li>`)
      });
  }
  
  
  
  
  
  // LOOPING GORUP KATEGORI 
function loopingKategori(lopp){
  
  $.each(lopp, function(i, data){
     $('#looping_kategori').append(`<div data-bs-dismiss="offcanvas" class="row mt-2" onclick="pageKategori('`+data.nama+`', '`+data.url+`', '`+data.gambar+`', '`+data.kode+`')">
     <div class="col-2">
       <img style="width:100%; border-radius:50px;" src="`+data.gambar+`" alt="" />
     </div>
     <div style="border-bottom:1px solid rgb(229,229,229)" class="col-10 pb-3 pt-2">
       <div class="row">
         <div class="col-10">
           <h6 style="font-weight:normal">`+data.nama+`</h6>
         </div>
         <div class="col-2">
           <span class="material-icons text-inti">
              chevron_right
              </span>
         </div>
       </div>
     </div>
   </div>`)
      });

  }  loopingKategori(json[0]);  
  
  // LOOPING PRODUK
  function loopingProduk(lopp, kategori, nama){
 $(".list-group-item").remove();
 
  $.each(lopp, function(i, data){
     $('#looping_produk').append(`<li style="border-radius:10px" class="list-group-item shadow d-flex justify-content-between align-items-center pt-4 pb-4 mt-2" data-card-produk-produk" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="showCanvas('`+data.nama+`', '`+data.harga+`', '`+data.url+`')">
    <div class="container">
      <p style="font-size:10px; opacity:0.6; margin-bottom:0px">`+kategori+`</p>
    <h6 style="font-weight:normal; font-size:16px;">`+data.nama+`</h6>
    </div>
    <span style="color:black; font-weight:bold;">`+data.harga+`</span>
  </li>`)
      });

  } 
  
  
  
  
  
   function showDeskripsi(link){
    let url = "https://bayarimo.my.id/member/id/v1/bo/api";
    let hallo = "https://bayarimopay.webtoko.net";
    let aktivasi = "c7f17e2a853d069f7982a34035c803a3cd7ddbb2656630fa1af731abcd21f533";

    var str = link.split("/")
    var urlz = str[4]
    // console.log(urlz)

    let param = {
      "aktivasi" : aktivasi,
      "param" : "detail",
      "url" : hallo+"/produk/"+urlz,
    }

    $.post(url, param,
      function(data){
   
   var inputan2 = $("#input-user-val2").val();
   
   if($("#nomor-val").val().length < 5){
     $("#btn_real").hide();
     $("#btn_null").show();
   }else{
     $("#btn_real").show();
     $("#btn_null").hide();
   }
   
   if(inputan2 == undefined || inputan2 == "" || inputan2 == null){
     inputan2 = "";
   }
   
    $("#detail-nama-deskripsi").html(data.data);
   $("#inputan-user").html($("#input-user-val").val()+inputan2);
   document.getElementById("linknya-hallo").href = hallo+"/produk/"+urlz+"?catatan="+$("#nomor-val").val();
});
    
  }
  
  
  function showCanvas(nama, harga, url){
    $("#nama_produk").html($("#nomor-val").val());
    $("#detail-nama-total").html(harga);
    $("#detail-nama-produk").html(nama);
    showDeskripsi(url);
    
  }
  
  
  
  
  
  
  
   // get request data produk
  function getApi(kategori, nama){
     $("#produk_kosong").hide();
     $(".list-produk-pulsa").remove();
     $("#loading-esaku").show();
     $("#data_kosong").hide(); 
     let url = "https://bayarimo.my.id/member/id/v1/bo/api";
     let hallo = "https://bayarimopay.webtoko.net";
     let aktivasi = "c7f17e2a853d069f7982a34035c803a3cd7ddbb2656630fa1af731abcd21f533";

     let param = {
      "aktivasi" : aktivasi,
      "param" : "produk",
      "url" : hallo+"/kategori/"+kategori,
    }

    $.post(url, param,
      function(data){
        // console.log(data)
        if(data.data == null){
          $("#produk_kosong").show();
          $("#loading-esaku").hide();
        }else{
          loopingProduk(data.data, nama);
          $("#loading-esaku").hide();
        }
      });
  }
  
   
  
  
  
  function pageKategori(nama, url, gambar, kode){
    

    $("#operator_produk").html(nama);
    document.getElementById("img_operator").src = gambar;
    $(".item_list_kategori").remove();
    loopingKategoriProduk(jsonProdukKategori(kode));
    getApi(url, nama);
    
  }
 
 
 
 
  
  function showProduk(val){
   $("li").remove();
   $(".item_list_kategori").remove();
//  $(".data-card-produk-produk").remove();
  getApi(urlJson(val), jsonNama(val), jsonProdukKategori(val));
  
  loopingKategoriProduk(jsonProdukKategori(val));
  $("#operator_produk").html(val);
  document.getElementById("img_operator").src = json[0][val].gambar;
  }
  
  
  function cekInput(a){
 let b;
 if(a.substr(0,3) == "628"){
   b = "08"+a.substr(3, 20);
   return b;
 }else if(a.substr(0,4) == "+628"){
   b = "08"+a.substr(4, 20);
   return b;
 }else{
   return a;
 }

}

function replaceNumber() {
  var tels = $("input[type=tel]").val(),
    tel = tels.replace('+', '', tels),
    tel = tel.replace('-', '', tel)
  tel = tel.replace('-', '', tel)
  tel = tel.replace(' ', '', tel)
  str2 = tel.substr(0, 2)
  if (str2 == '62') {
    str1 = tel.substr(2, 15)
    tel = '0' + str1
  }
  $("input[type=tel]").val(tel)
  return tel
}

$("input[type=tel]").change(function() {
  var tel = replaceNumber()
  dtc = tel.substr(0, 4)
  no = dtc
  oprt(no)
})

$("input[type=tel]").keyup(function() {
  var tel = replaceNumber()
  no = tel
  oprt(no)
})


 $('#nomor-val').on('change', function(){
      var no = $('#nomor-val').val()
      if (no.length >= 10) {
        ceknomoruser()
      }
    })
 
 // cek nomor operator user
function ceknomoruser(){
 
  let b = document.getElementById("nomor-val").value;
  let c = b;
 
  let nomor = cekInput(b).substr(0,4);
  
  
  if(nomor == "08"){

   
   // telkomsel
  }
  
  
  else if(nomor === '0811' || nomor === '0812' || nomor === '0813' || nomor === '0821' || nomor === '0822' || nomor === '0852' || nomor === '0853' || nomor === '0823' || nomor === '0851' || nomor === '0835'){
    
   showProduk("Telkomsel");
  
  // Indosat
  }else if(nomor === '0814' || nomor === '0815' || nomor === '0816' || nomor === '0855' || nomor === '0856' || nomor === '0857' || nomor === '0858'){
    showProduk("Indosat");
    // xl axiata
  }else if(nomor === '0818' || nomor === '0817' || nomor === '0819' || nomor === '0859' || nomor === '0877' || nomor === '0878'){

 
showProduk("Xl Axiata");
    
    // axis
  }else if(nomor === '0838' || nomor === '0831' || nomor === '0832' || nomor === '0833'){

    showProduk("Axis");
    // tri 
  }else if(nomor === '0895' || nomor === '0896' || nomor === '0897' || nomor === '0898' || nomor === '0899' ){

    showProduk("Tri");
    // Smartfren
  }else if(nomor === '0881' || nomor === '0882' || nomor === '0883' || nomor === '0884' || nomor === '0885' || nomor === '0886' || nomor === '0887' || nomor === '0888' || nomor === '0889'){

showProduk("Smartfren");

  }else if(  nomor === '0' || nomor === ' ' || nomor === null){
     $("li").remove();
    loader.style = "display: none";
    $("#list-produk").html(`<li class="list-group-item d-flex justify-content-between align-items-center" data-bs-toggle="offcanvas" data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom" id="diklik">Masukkan nomor tujuan</li>`);
  }else if(nomor === 123 || nomor === 9288){
    $("li").remove();

    loader.style = "display: none";
     $("li").remove();
    $("#list-produk").html(`<li class="list-group-item d-flex justify-content-between align-items-center" data-bs-toggle="offcanvas" data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom" id="diklik">Masukkan nomor tujuan dengan benar</li>`);
  }
  
}


  
 function produkKategori(url, nama){
  
 //  loopingKategoriProduk(jsonProdukKategori(url));
  getApi(url, nama);
}  
  
  
  
</script>







    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" type="text/javascript" charset="utf-8"></script>

    
  </body>
</html>
